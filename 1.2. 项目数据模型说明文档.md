 根据你们三人小组的任务划分与短期开发周期（增量开发、以功能演示为主），我为你整理了一份**可直接使用的数据模型说明文档**，重点在于：

- 保持字段简洁但能支撑主要功能（用户登录、位置共享、发帖、消息交流）；
- 与 Android 前端、后端接口设计保持兼容；
- 适合后期迭代时自然扩展。

------

# 📘 iSpot 项目数据模型说明文档（简版）

## 1️⃣ 概述

本文档定义了 iSpot 地图社交应用的核心数据实体。
 模型设计遵循以下原则：

- 尽量减少字段数量，确保易实现；
- 所有实体均具备唯一标识 `id`；
- 兼容 Android 与后端 JSON 交互；
- 便于后期迁移至数据库结构。

------

## 2️⃣ 实体列表

| 实体名          | 说明                  | 用途               |
| --------------- | --------------------- | ------------------ |
| `User`          | 用户信息              | 登录注册、显示资料 |
| `LocationPoint` | 位置信息              | 地图显示用户坐标   |
| `Post`          | 用户动态（文字+图片） | 朋友圈功能         |
| `Message`       | 点对点聊天消息        | 社交互动基础       |

------

## 3️⃣ 数据模型详情

------

### 🧍‍♂️ `User` 实体 —— 用户信息

| 字段名           | 类型     | 示例                               | 说明                   |
| ---------------- | -------- | ---------------------------------- | ---------------------- |
| `id`             | `String` | `"a3f2-7c91-4b2b"`                 | 系统自动生成的 UUID    |
| `username`       | `String` | `"theresa_01"`                     | 用户登录名（唯一）     |
| `password`       | `String` | `"123456"`                         | 登录密码（暂不加密）   |
| `nickname`       | `String` | `"Theresa"`                        | 显示名                 |
| `avatarUrl`      | `String` | `"https://example.com/avatar.png"` | 头像地址，可选         |
| `lat`            | `double` | `35.6895`                          | 当前纬度               |
| `lng`            | `double` | `139.6917`                         | 当前经度               |
| `lastActiveTime` | `long`   | `1697442912000`                    | 最近活跃时间戳（毫秒） |

> 💡 前端主要用途：
>
> - 用户登录状态管理
> - 地图上显示头像标记
> - 个人主页资料显示

------

### 📍 `LocationPoint` 实体 —— 用户位置点

| 字段名      | 类型     | 示例               | 说明        |
| ----------- | -------- | ------------------ | ----------- |
| `id`        | `String` | `"loc-002"`        | 唯一标识    |
| `userId`    | `String` | `"a3f2-7c91-4b2b"` | 对应用户 ID |
| `lat`       | `double` | `35.6895`          | 纬度        |
| `lng`       | `double` | `139.6917`         | 经度        |
| `timestamp` | `long`   | `1697442912000`    | 记录时间戳  |

> 💡 后端保存最近位置；
>  Android 地图端通过接口 `/api/location/all` 获取全部坐标点用于渲染。

------

### 🗣️ `Post` 实体 —— 动态信息

| 字段名         | 类型     | 示例                            | 说明                 |
| -------------- | -------- | ------------------------------- | -------------------- |
| `id`           | `String` | `"post-1001"`                   | 动态唯一标识         |
| `userId`       | `String` | `"a3f2-7c91-4b2b"`              | 发布者               |
| `content`      | `String` | `"今天在涩谷偶遇了一只猫 🐱"`    | 动态文本             |
| `imageUrl`     | `String` | `"https://example.com/pic.jpg"` | 动态图片（可空）     |
| `timestamp`    | `long`   | `1697442912000`                 | 发布时间戳           |
| `likeCount`    | `int`    | `12`                            | 点赞数               |
| `commentCount` | `int`    | `3`                             | 评论数（可省略实现） |

> 💡 最小实现：只需显示 `content` 与 `imageUrl`，点赞可先不实现逻辑。

------

### 💬 `Message` 实体 —— 聊天信息

| 字段名       | 类型      | 示例               | 说明         |
| ------------ | --------- | ------------------ | ------------ |
| `id`         | `String`  | `"msg-0001"`       | 消息唯一标识 |
| `senderId`   | `String`  | `"a3f2-7c91-4b2b"` | 发送者       |
| `receiverId` | `String`  | `"u-9988"`         | 接收者       |
| `content`    | `String`  | `"晚上见！"`       | 消息内容     |
| `timestamp`  | `long`    | `1697442912000`    | 发送时间戳   |
| `read`       | `boolean` | `false`            | 是否已读     |

> 💡 聊天功能可简化为“单向发送+本地显示”，后端暂不需实时通信（WebSocket 可后期扩展）。

------

## 4️⃣ 实体之间的关系（简图）

```
User 1 ─── * LocationPoint
User 1 ─── * Post
User 1 ─── * Message (sender)
User 1 ─── * Message (receiver)
```

📊 说明：

- 用户可以拥有多个定位记录；
- 用户可以发布多条动态；
- 消息通过 `senderId` 与 `receiverId` 建立双向关联。

------

## 5️⃣ JSON 交互样例

### 🔹 用户注册

```json
POST /api/user/register
{
  "username": "theresa_01",
  "password": "123456",
  "nickname": "Theresa"
}
```

响应：

```json
{
  "id": "a3f2-7c91-4b2b",
  "username": "theresa_01",
  "nickname": "Theresa",
  "avatarUrl": null,
  "lat": 0.0,
  "lng": 0.0
}
```

### 🔹 上传位置

```json
POST /api/location/update
{
  "userId": "a3f2-7c91-4b2b",
  "lat": 35.6895,
  "lng": 139.6917
}
```

### 🔹 获取所有动态

```json
GET /api/post/all
[
  {
    "userId": "u-01",
    "content": "今天在学校图书馆看书 📚",
    "imageUrl": null,
    "timestamp": 1697442912000
  }
]
```

------

## 6️⃣ 简化实现建议

| 优先级   | 实体            | 建议                  |
| -------- | --------------- | --------------------- |
| ⭐ 高     | `User`          | 注册、登录、保存坐标  |
| ⭐ 高     | `LocationPoint` | 上传位置、展示所有点  |
| ⭐ 中     | `Post`          | 发布动态（文字/图片） |
| ⚙️ 可延后 | `Message`       | 后期增加简单消息记录  |

------

## ✅ 结语

本数据模型方案：

- 字段简洁、逻辑清晰；
- 可支持 Android 地图展示 + 基础社交；
- 能快速完成接口与 UI 联调；
- 可在后期轻松扩展数据库结构。

