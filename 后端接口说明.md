# 📘 iSpot 后端接口说明文档

## 1️⃣ 用户 User 模块

| 接口                 | 方法 | 请求示例                                                     | 返回示例                                                     | 说明             |
| -------------------- | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ---------------- |
| `/api/user/register` | POST | `json { "username":"theresa_01","password":"123456","nickname":"Theresa" } ` | `json { "id":"a3f2-7c91-4b2b","username":"theresa_01","nickname":"Theresa","avatarUrl":null,"lat":0.0,"lng":0.0,"lastActiveTime":0 } ` | 用户注册         |
| `/api/user/login`    | POST | `json { "username":"theresa_01","password":"123456" } `      | `json { "id":"a3f2-7c91-4b2b","username":"theresa_01","nickname":"Theresa","avatarUrl":"https://example.com/avatar.png","lat":35.6895,"lng":139.6917,"lastActiveTime":1751039232305 } ` | 用户登录         |
| `/api/user/all`      | GET  | 无                                                           | `json [ { "id":"a3f2-7c91-4b2b","username":"theresa_01","nickname":"Theresa","avatarUrl":null,"lat":0.0,"lng":0.0,"lastActiveTime":0 } ] ` | 获取所有用户列表 |

------

## 2️⃣ 位置 Location 模块

| 接口                   | 方法 | 请求示例                                                     | 返回示例                                                     | 说明                                        |
| ---------------------- | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------- |
| `/api/location/update` | POST | `json { "userId":"a3f2-7c91-4b2b","lat":35.6895,"lng":139.6917 } ` | `json { "userId":"a3f2-7c91-4b2b","lat":35.6895,"lng":139.6917 } ` | 上传/更新用户位置（返回简化 PostDTO）       |
| `/api/location/all`    | GET  | 无                                                           | `json [ { "userId":"a3f2-7c91-4b2b","lat":35.6895,"lng":139.6917 } ] ` | 获取所有用户的最新位置（返回 PostDTO 列表） |

------

## 3️⃣ 动态 Post 模块

| 接口               | 方法 | 请求示例                                                     | 返回示例                                                     | 说明             |
| ------------------ | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ---------------- |
| `/api/post/create` | POST | `json { "userId":"33","content":"in 🐱","imageUrl":"https://example.com/pic.jpg" } ` | {<br/>    "id": "14",<br/>    "userId": "33",<br/>    "content": "in",<br/>    "imageUrl": "https://example.com/pic.jpg",<br/>    "timestamp": 1760620127,<br/>    "likeCount": 66,<br/>    "commentCount": 32<br/>} | 创建新动态       |
| `/api/post/all`    | GET  | 无                                                           | `json [ {<br/>    "id": "14",<br/>    "userId": "33",<br/>    "content": "in",<br/>    "imageUrl": "https://example.com/pic.jpg",<br/>    "timestamp": 1760620127,<br/>    "likeCount": 66,<br/>    "commentCount": 32<br/>}] ` | 获取所有动态列表 |

------

## 4️⃣ 消息 Message 模块

| 接口                                       | 方法 | 请求示例                                                     | 返回示例                                                     | 说明                     |
| ------------------------------------------ | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------ |
| `/api/message/send`                        | POST | `json { "senderId":"a3f2-7c91-4b2b","receiverId":"u-9988","content":"晚上见！" } ` | `json { "id":"msg-0001","senderId":"a3f2-7c91-4b2b","receiverId":"u-9988","content":"晚上见！","timestamp":1760625500,"read":false } ` | 发送消息                 |
| `/api/message/between?userA=xxx&userB=yyy` | GET  | 无                                                           | `json [ { "id":"msg-0001","senderId":"a3f2-7c91-4b2b","receiverId":"u-9988","content":"晚上见！","timestamp":1760625500,"read":false }, { "id":"msg-0002","senderId":"u-9988","receiverId":"a3f2-7c91-4b2b","content":"好的","timestamp":1760625560,"read":true } ] ` | 获取两个用户间的聊天记录 |

